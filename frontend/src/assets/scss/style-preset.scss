/**======================================================================
=========================================================================
Template Name: Datta able - Admin Template
Author: Codedthemes
Support: https://codedthemes.support-hub.io/
File: style.css
=========================================================================
=================================================================================== */
@use 'sass:color';
@use 'sass:math';
@use 'sass:string';
@use 'sass:map';

// main framework
@import 'settings/color-variables';
@import 'bootstrap/scss/functions';
@import 'bootstrap/scss/variables';
@import 'settings/bootstrap-variables';
@import 'settings/theme-variables';

@import 'bootstrap/scss/mixins';

$i: 1;

@each $name, $value in $preset-colors {
  [data-pc-preset='#{$name}'] {
    $pc-primary: map.get($value, 'primary');
    $color-rgb: to-rgb($pc-primary);
    $pc-primary-light: tint-color($pc-primary, 90%);
    --pc-sidebar-active-color: #{$pc-primary};
    --bs-blue: #{$pc-primary};
    --bs-primary: #{$pc-primary};
    --bs-primary-rgb: #{$color-rgb};
    --bs-primary-light: #{$pc-primary-light};
    --bs-link-color: #{$pc-primary};
    --bs-link-color-rgb: #{$color-rgb};
    --bs-link-hover-color: #{shift-color($pc-primary, $link-shade-percentage)};
    --bs-link-hover-color-rgb: to-rgb(shift-color($pc-primary, $link-shade-percentage));

    --dt-row-selected: #{to-rgb($pc-primary)};

    .bg-light-primary {
      background: $pc-primary-light;
      color: $pc-primary;
    }

    .link-primary {
      $value: map.get($value, 'primary');
      color: $value !important; // stylelint-disable-line declaration-no-important

      @if $link-shade-percentage !=0 {

        &:hover,
        &:focus {
          color: if(color-contrast($value)==$color-contrast-light,
              shade-color($value, $link-shade-percentage),
              tint-color($value, $link-shade-percentage)) !important; // stylelint-disable-line declaration-no-important
        }
      }
    }

    .btn-primary {
      @include button-variant($pc-primary, $pc-primary);
    }

    .btn-link {
      --bs-btn-color: #{$pc-primary};
      --bs-btn-hover-color: #{shift-color($pc-primary, $link-shade-percentage)};
      --bs-btn-active-color: #{shift-color($pc-primary, $link-shade-percentage)};
    }

    .text-bg-primary {
      color: color-contrast($pc-primary) if($enable-important-utilities, !important, null);
      background-color: RGBA($color-rgb, var(--#{$prefix}bg-opacity, 1)) if($enable-important-utilities, !important, null);
    }

    .accordion {
      // scss-docs-start accordion-css-vars
      --#{$prefix}accordion-btn-focus-border-color: #{$pc-primary};
      --#{$prefix}accordion-btn-focus-box-shadow: 0 0 0 #{$input-btn-focus-width} #{rgba($pc-primary, $input-btn-focus-color-opacity)};
      --#{$prefix}accordion-active-color: #{$pc-primary};
      --#{$prefix}accordion-active-bg: #{$pc-primary-light};
      --#{$prefix}accordion-btn-active-icon: #{escape-svg(
 url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='#{$pc-primary}'><path fill-rule=' evenodd' d=' M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/></svg>"))
    }

    ;
    // scss-docs-end accordion-css-vars
  }

  .progress {
    --bs-progress-bar-bg: #{$pc-primary};
  }

  .form-check {
    .form-check-input {
      &.input-primary {
        &:checked {
          border-color: $pc-primary;
          background-color: $pc-primary;
        }
      }

      &.input-light-primary {
        &:checked {
          border-color: shift-color($pc-primary, $soft-bg-level);
          background-color: shift-color($pc-primary, $soft-bg-level);

          &[type='checkbox'] {
            background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path fill='none' stroke='#{$pc-primary}' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10l3 3l6-6'/></svg>"));
          }

          &[type='radio'] {
            background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'><circle r='2' fill='#{$pc-primary}'/></svg>"));
          }
        }
      }

      &.input-primary,
      &.input-light-primary {
        &:focus {

          &[type='checkbox'],
          &[type='radio'] {
            box-shadow: 0 0 0 0.2rem rgba($pc-primary, 0.25);
            border-color: $pc-primary;
          }
        }
      }
    }

    &.form-switch {
      .form-check-input.input-light-primary {
        &:checked {
          background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'><circle r='3' fill='#{$pc-primary}'/></svg>"));
        }
      }
    }
  }

  .btn-light-primary {
    background: $pc-primary-light;
    color: $pc-primary;
    border-color: $pc-primary-light;

    &:hover {
      background: $pc-primary;
      color: #fff;
      border-color: $pc-primary;
    }

    &.focus,
    &:focus {
      background: $pc-primary;
      color: #fff;
      border-color: $pc-primary;
    }

    &:not(:disabled):not(.disabled).active,
    &:not(:disabled):not(.disabled):active,
    .show>&.dropdown-toggle {
      background: $pc-primary;
      color: #fff;
      border-color: $pc-primary;
    }
  }

  .btn-check:active,
  .btn-check:checked {
    +.btn-light-primary {
      background: $pc-primary;
      color: #fff;
      border-color: $pc-primary;
    }
  }

  .btn-link-primary {
    background: transparent;
    color: $pc-primary;
    border-color: transparent;

    &:hover {
      background: $pc-primary-light;
      color: $pc-primary;
      border-color: $pc-primary-light;
    }

    &.focus,
    &:focus {
      background: $pc-primary-light;
      color: $pc-primary;
      border-color: $pc-primary-light;
    }

    &:not(:disabled):not(.disabled).active,
    &:not(:disabled):not(.disabled):active,
    .show>&.dropdown-toggle {
      background: $pc-primary-light;
      color: $pc-primary;
      border-color: $pc-primary-light;
    }
  }

  .btn-check:active,
  .btn-check:checked {
    +.btn-link-primary {
      background: $pc-primary-light;
      color: $pc-primary;
      border-color: $pc-primary-light;
    }
  }

  @include table-variant('primary', $pc-primary);
}
}

$drp-icon: (
  'preset-1': '\ea61',
);

@each $key, $value in $drp-icon {
  [data-pc-drp-menu-icon='#{$key}'] {
    --pc-sidebar-drp-menu-icon: '#{$value}';
  }
}

$drp-link-icon: (
  'preset-1': '',
);

@each $key, $value in $drp-link-icon {
  [data-pc-drp-menu-link-icon='#{$key}'] {
    --pc-sidebar-drp-menu-link-icon: '#{$value}';
  }
}

// ===============================================
//   Custom Overrides for Dark Mode & Visibility
// ===============================================

:root {
  --bs-kanban-bg: #f5f6fa; // Light mode kanban bg
}

[data-pc-theme='dark'] {
  --bs-kanban-bg: #1e293b;

  // Chart Visibility Fixes
  .apexcharts-text {
    fill: var(--bs-chart-text-color, #e2e8f0) !important;
  }

  .apexcharts-legend-text {
    color: var(--bs-chart-text-color, #e2e8f0) !important;
    font-family: inherit !important;
  }

  .apexcharts-gridline {
    stroke: var(--bs-chart-grid-color, #334155) !important;
  }

  .apexcharts-xaxis-label,
  .apexcharts-yaxis-label {
    fill: var(--bs-chart-text-color, #e2e8f0) !important;
  }

  // Pie Chart Specifics
  .apexcharts-pie-label {
    fill: #ffffff !important; // Force white text inside pie
  }

  .apexcharts-pie-area {
    stroke-width: 0 !important; // Remove border
  }

  .apexcharts-pie-slice-path {
    stroke-width: 0 !important;
  }

  // Header Icon Hover Fix
  .pc-header .pc-head-link:hover {
    color: #ffffff;

    >svg,
    >i {
      color: #ffffff;
    }
  }

  // Form Label Visibility
  .form-label,
  .col-form-label {
    color: var(--bs-heading-color, #f8fafc) !important;
  }

  // Status Text Visibility
  .text-success {
    color: #4ade80 !important; // Lighter green for dark mode
  }

  .text-danger {
    color: #f87171 !important; // Lighter red
  }

  .text-warning {
    color: #facc15 !important; // Lighter yellow
  }

  // ApexCharts Tooltip Fix
  .apexcharts-tooltip {
    background: #1e293b !important;
    border-color: #334155 !important;
    color: #f8fafc !important;
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);

    .apexcharts-tooltip-title {
      background: #0f172a !important;
      border-bottom: 1px solid #334155 !important;
      font-family: inherit !important;
    }

    .apexcharts-tooltip-text {
      color: #f8fafc !important;
      font-family: inherit !important;
    }

    .apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
      opacity: 1;
    }
  }

  // Restore Auth Pages to Original (Light) Theme
  // This overrides the dark mode variables specifically for auth pages
  .auth-wrapper,
  .auth-main {
    background: #eff3f6 !important; // Original/Light background

    .card {
      background: #ffffff !important;
      border-color: rgba(0, 0, 0, 0.05) !important;
      box-shadow: 0 1px 20px 0 rgba(69, 90, 100, 0.08) !important;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    .h1,
    .h2,
    .h3,
    .h4,
    .h5,
    .h6 {
      color: #3f4d67 !important; // Original text color
    }

    .text-muted {
      color: #888888 !important;
    }

    input,
    select,
    textarea {
      background: #ffffff !important;
      color: #495057 !important;
      border-color: #ced4da !important;

      &:focus {
        background: #ffffff !important;
        border-color: #3b82f6 !important;
        color: #495057 !important;
      }
    }

    // Auth specific input addons if any
    .input-group-text {
      background: #f8f9fa !important;
      border-color: #ced4da !important;
      color: #495057 !important;
    }

    // Restore Background Shapes (Blobs) colors
    .auth-bg {
      .r {

        // First child: Original brand-color1
        &:first-child {
          background: linear-gradient(-135deg, #1de9b6 0%, #1dc4e9 100%) !important;
        }

        // Last child: Original brand-color2
        &:last-child {
          background: linear-gradient(-135deg, #899fd4 0%, #a389d4 100%) !important;
        }

        // Small blobs
        &.s {
          &:nth-child(2) {
            background: #04a9f5 !important; // Original Blue
          }

          &:nth-child(3) {
            background: #1de9b6 !important; // Original Green
          }
        }
      }
    }
  }
}